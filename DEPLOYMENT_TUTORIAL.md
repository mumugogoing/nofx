# ðŸŽ“ éƒ¨ç½²æ•™ç¨‹ï¼šä»Žæœ¬åœ°åˆ°äº‘æœåŠ¡å™¨

æœ¬æ•™ç¨‹å°†ä¸€æ­¥æ­¥æŒ‡å¯¼ä½ å¦‚ä½•å°†NOFXé¡¹ç›®ä»Žæœ¬åœ°éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼ˆä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ï¼‰ã€‚

## ðŸ“ å‡†å¤‡å·¥ä½œæ¸…å•

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ æœ‰ï¼š

- [ ] ä¸€å°äº‘æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€AWSç­‰ï¼‰
- [ ] æœåŠ¡å™¨çš„IPåœ°å€
- [ ] æœåŠ¡å™¨çš„SSHç™»å½•æƒé™ï¼ˆç”¨æˆ·åå’Œå¯†ç ï¼Œæˆ–SSHå¯†é’¥ï¼‰
- [ ] å¸å®‰APIå¯†é’¥ï¼ˆç”¨äºŽäº¤æ˜“ï¼‰
- [ ] DeepSeek APIå¯†é’¥ï¼ˆç”¨äºŽAIå†³ç­–ï¼‰

## ðŸ” ç¬¬ä¸€æ­¥ï¼šå®‰å…¨é…ç½®SSHå¯†é’¥ï¼ˆå¼ºçƒˆæŽ¨èï¼‰

**ä¸ºä»€ä¹ˆè¦ç”¨SSHå¯†é’¥ï¼Ÿ**
- âœ… æ¯”å¯†ç æ›´å®‰å…¨
- âœ… æ— éœ€æ¯æ¬¡è¾“å…¥å¯†ç 
- âœ… é˜²æ­¢å¯†ç æ³„éœ²

### 1.1 ç”ŸæˆSSHå¯†é’¥ï¼ˆåœ¨æœ¬åœ°ç”µè„‘ï¼‰

```bash
# å¦‚æžœä½ è¿˜æ²¡æœ‰SSHå¯†é’¥ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"

# æŒ‰æç¤ºæ“ä½œï¼ˆä¸€èˆ¬ç›´æŽ¥æŒ‰Enterä½¿ç”¨é»˜è®¤è®¾ç½®å³å¯ï¼‰
# ç”Ÿæˆä½ç½®é€šå¸¸åœ¨ï¼š~/.ssh/id_rsa
```

### 1.2 å°†å…¬é’¥å¤åˆ¶åˆ°æœåŠ¡å™¨

```bash
# æ–¹æ³•ä¸€ï¼šä½¿ç”¨ssh-copy-idï¼ˆæœ€ç®€å•ï¼‰
ssh-copy-id -p 22 root@ä½ çš„æœåŠ¡å™¨IP

# ç¤ºä¾‹ï¼š
ssh-copy-id -p 22 root@47.108.148.251

# è¾“å…¥ä¸€æ¬¡æœåŠ¡å™¨å¯†ç åŽï¼Œä»¥åŽå°±ä¸éœ€è¦å¯†ç äº†
```

```bash
# æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å¤åˆ¶ï¼ˆå¦‚æžœä¸Šé¢çš„æ–¹æ³•ä¸å¯ç”¨ï¼‰
# 1. æŸ¥çœ‹ä½ çš„å…¬é’¥
cat ~/.ssh/id_rsa.pub

# 2. å¤åˆ¶è¾“å‡ºçš„å†…å®¹ï¼ˆå®Œæ•´çš„ä¸€è¡Œï¼‰

# 3. ç™»å½•åˆ°æœåŠ¡å™¨
ssh root@ä½ çš„æœåŠ¡å™¨IP

# 4. åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»º.sshç›®å½•ï¼ˆå¦‚æžœä¸å­˜åœ¨ï¼‰
mkdir -p ~/.ssh
chmod 700 ~/.ssh

# 5. å°†å…¬é’¥æ·»åŠ åˆ°æŽˆæƒæ–‡ä»¶
echo "ä½ çš„å…¬é’¥å†…å®¹" >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys

# 6. é€€å‡ºæœåŠ¡å™¨
exit
```

### 1.3 æµ‹è¯•SSHè¿žæŽ¥

```bash
# çŽ°åœ¨ä½ åº”è¯¥å¯ä»¥æ— å¯†ç ç™»å½•
ssh root@ä½ çš„æœåŠ¡å™¨IP

# å¦‚æžœæˆåŠŸç™»å½•ï¼Œè¯´æ˜ŽSSHå¯†é’¥é…ç½®æˆåŠŸï¼
# è¾“å…¥ exit é€€å‡º
```

## ðŸ“¦ ç¬¬äºŒæ­¥ï¼šå‡†å¤‡é¡¹ç›®é…ç½®

### 2.1 å…‹éš†é¡¹ç›®ï¼ˆåœ¨æœ¬åœ°ç”µè„‘ï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°
git clone https://github.com/mumugogoing/nofx.git
cd nofx
```

### 2.2 é…ç½®APIå¯†é’¥

```bash
# 2. å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿
cp config.json.example config.json

# 3. ç¼–è¾‘é…ç½®æ–‡ä»¶
nano config.json  # æˆ–ä½¿ç”¨ vimã€vscodeç­‰ä»»ä½•ç¼–è¾‘å™¨
```

**å…³é”®é…ç½®é¡¹è¯´æ˜Žï¼š**

```json
{
  "traders": [
    {
      "id": "my_trader",               // äº¤æ˜“å‘˜IDï¼ˆè‡ªå®šä¹‰ï¼‰
      "name": "My AI Trader",          // äº¤æ˜“å‘˜åç§°
      "ai_model": "deepseek",          // AIæ¨¡åž‹ï¼ˆdeepseekæˆ–qwenï¼‰
      
      // å¸å®‰APIé…ç½®ï¼ˆå¿…å¡«ï¼‰
      "binance_api_key": "ä½ çš„å¸å®‰API_KEY",
      "binance_secret_key": "ä½ çš„å¸å®‰SECRET_KEY",
      
      // DeepSeek APIé…ç½®ï¼ˆå¦‚æžœä½¿ç”¨deepseekæ¨¡åž‹ï¼‰
      "deepseek_key": "ä½ çš„DeepSeek_API_KEY",
      
      // äº¤æ˜“å‚æ•°
      "initial_balance": 1000.0,       // åˆå§‹ä½™é¢ï¼ˆç¾Žå…ƒï¼‰
      "scan_interval_minutes": 3,      // æ‰«æé—´éš”ï¼ˆåˆ†é’Ÿï¼‰
      "max_positions": 5               // æœ€å¤§æŒä»“æ•°
    }
  ],
  "use_default_coins": true,           // ä½¿ç”¨é»˜è®¤ä¸»æµå¸ç§
  "api_server_port": 8080              // APIæœåŠ¡ç«¯å£
}
```

**å¦‚ä½•èŽ·å–APIå¯†é’¥ï¼š**

1. **å¸å®‰APIå¯†é’¥**ï¼š
   - ç™»å½• https://www.binance.com
   - è¿›å…¥ è´¦æˆ· â†’ APIç®¡ç†
   - åˆ›å»ºæ–°çš„APIå¯†é’¥
   - âš ï¸ è®°å¾—å¯ç”¨"å¯ç”¨çŽ°è´§å’Œæ æ†äº¤æ˜“"æƒé™

2. **DeepSeek APIå¯†é’¥**ï¼š
   - è®¿é—® https://platform.deepseek.com
   - æ³¨å†Œå¹¶ç™»å½•
   - è¿›å…¥API Keysé¡µé¢åˆ›å»ºæ–°å¯†é’¥

## ðŸš€ ç¬¬ä¸‰æ­¥ï¼šä¸€é”®éƒ¨ç½²åˆ°æœåŠ¡å™¨

### æ–¹å¼Aï¼šç›´æŽ¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ï¼ˆæœ€ç®€å•ï¼‰

```bash
# åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ
./deploy.sh ä½ çš„æœåŠ¡å™¨IP root

# ç¤ºä¾‹ï¼š
./deploy.sh 47.108.148.251 root

# å¦‚æžœSSHç«¯å£ä¸æ˜¯é»˜è®¤çš„22ï¼š
./deploy.sh 47.108.148.251 root 2222
```

### æ–¹å¼Bï¼šä½¿ç”¨é…ç½®æ–‡ä»¶ï¼ˆé€‚åˆé¢‘ç¹éƒ¨ç½²ï¼‰

```bash
# 1. åˆ›å»ºéƒ¨ç½²é…ç½®æ–‡ä»¶
cp deploy-config.example.sh deploy-config.sh

# 2. ç¼–è¾‘é…ç½®æ–‡ä»¶
nano deploy-config.sh

# å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š
# export DEPLOY_SERVER_IP="47.108.148.251"
# export DEPLOY_SSH_USER="root"
# export DEPLOY_SSH_PORT="22"
# export DEPLOY_REMOTE_DIR="/opt/nofx"

# 3. ä¿å­˜åŽè¿è¡Œ
./deploy.sh
```

### éƒ¨ç½²è¿‡ç¨‹è¯´æ˜Ž

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š

1. âœ… æ£€æŸ¥SSHè¿žæŽ¥
2. âœ… æ£€æŸ¥è¿œç¨‹æœåŠ¡å™¨æ˜¯å¦å®‰è£…Docker
3. âœ… å¦‚æžœæœªå®‰è£…ï¼Œä¼šè¯¢é—®æ˜¯å¦è‡ªåŠ¨å®‰è£…Docker
4. âœ… å°†é¡¹ç›®æ–‡ä»¶åŒæ­¥åˆ°æœåŠ¡å™¨çš„ `/opt/nofx` ç›®å½•
5. âœ… åœ¨æœåŠ¡å™¨ä¸Šæž„å»ºDockeré•œåƒ
6. âœ… å¯åŠ¨æœåŠ¡å®¹å™¨

**é¢„è®¡æ—¶é—´ï¼š** 5-10åˆ†é’Ÿï¼ˆå–å†³äºŽç½‘ç»œé€Ÿåº¦å’ŒæœåŠ¡å™¨é…ç½®ï¼‰

## ðŸŽ‰ ç¬¬å››æ­¥ï¼šè®¿é—®å’ŒéªŒè¯

### 4.1 è®¿é—®Webç•Œé¢

éƒ¨ç½²æˆåŠŸåŽï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š

```
http://ä½ çš„æœåŠ¡å™¨IP:3000
```

**ç¤ºä¾‹ï¼š** http://47.108.148.251:3000

### 4.2 æ£€æŸ¥APIæœåŠ¡

```
http://ä½ çš„æœåŠ¡å™¨IP:8080/health
```

å¦‚æžœè¿”å›žå¥åº·çŠ¶æ€ï¼Œè¯´æ˜Žéƒ¨ç½²æˆåŠŸï¼

### 4.3 é…ç½®é˜²ç«å¢™/å®‰å…¨ç»„

**é˜¿é‡Œäº‘ç”¨æˆ·ï¼š**

1. ç™»å½•é˜¿é‡Œäº‘æŽ§åˆ¶å°
2. è¿›å…¥ ECSç®¡ç† â†’ å®žä¾‹
3. ç‚¹å‡»å®žä¾‹ID â†’ å®‰å…¨ç»„ â†’ é…ç½®è§„åˆ™
4. æ·»åŠ å…¥æ–¹å‘è§„åˆ™ï¼š
   - ç«¯å£ï¼š3000/3000ï¼ˆWebç•Œé¢ï¼‰
   - ç«¯å£ï¼š8080/8080ï¼ˆAPIæœåŠ¡ï¼‰
   - æŽˆæƒå¯¹è±¡ï¼š0.0.0.0/0ï¼ˆå…è®¸æ‰€æœ‰IPè®¿é—®ï¼Œç”Ÿäº§çŽ¯å¢ƒå»ºè®®é™åˆ¶ï¼‰

**å…¶ä»–äº‘æœåŠ¡å•†ç±»ä¼¼é…ç½®**

## ðŸ› ï¸ å¸¸ç”¨ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€

```bash
ssh root@ä½ çš„æœåŠ¡å™¨IP 'cd /opt/nofx && docker compose ps'
```

### å®žæ—¶æŸ¥çœ‹æ—¥å¿—

```bash
ssh root@ä½ çš„æœåŠ¡å™¨IP 'cd /opt/nofx && docker compose logs -f'

# åªçœ‹åŽç«¯æ—¥å¿—
ssh root@ä½ çš„æœåŠ¡å™¨IP 'cd /opt/nofx && docker compose logs -f nofx'

# åªçœ‹å‰ç«¯æ—¥å¿—
ssh root@ä½ çš„æœåŠ¡å™¨IP 'cd /opt/nofx && docker compose logs -f nofx-frontend'
```

### é‡å¯æœåŠ¡

```bash
ssh root@ä½ çš„æœåŠ¡å™¨IP 'cd /opt/nofx && docker compose restart'
```

### åœæ­¢æœåŠ¡

```bash
ssh root@ä½ çš„æœåŠ¡å™¨IP 'cd /opt/nofx && docker compose down'
```

### æ›´æ–°ä»£ç å¹¶é‡æ–°éƒ¨ç½²

```bash
# æ–¹å¼ä¸€ï¼šé‡æ–°è¿è¡Œéƒ¨ç½²è„šæœ¬
./deploy.sh ä½ çš„æœåŠ¡å™¨IP root

# æ–¹å¼äºŒï¼šåœ¨æœåŠ¡å™¨ä¸Šæ‰‹åŠ¨æ›´æ–°
ssh root@ä½ çš„æœåŠ¡å™¨IP
cd /opt/nofx
git pull
docker compose up -d --build
```

## ðŸ”§ æ•…éšœæŽ’æŸ¥

### é—®é¢˜1ï¼šæ— æ³•è¿žæŽ¥åˆ°æœåŠ¡å™¨

```bash
# æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦åœ¨çº¿
ping ä½ çš„æœåŠ¡å™¨IP

# æ£€æŸ¥SSHç«¯å£æ˜¯å¦å¼€æ”¾
nc -zv ä½ çš„æœåŠ¡å™¨IP 22

# æ£€æŸ¥SSHè¿žæŽ¥è¯¦ç»†ä¿¡æ¯
ssh -v root@ä½ çš„æœåŠ¡å™¨IP
```

### é—®é¢˜2ï¼šç«¯å£æ— æ³•è®¿é—®

```bash
# ç™»å½•æœåŠ¡å™¨æ£€æŸ¥å®¹å™¨çŠ¶æ€
ssh root@ä½ çš„æœåŠ¡å™¨IP
cd /opt/nofx
docker compose ps

# æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«ç›‘å¬
netstat -tlnp | grep 3000
netstat -tlnp | grep 8080

# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
sudo ufw status  # Ubuntu
sudo firewall-cmd --list-all  # CentOS
```

### é—®é¢˜3ï¼šå®¹å™¨å¯åŠ¨å¤±è´¥

```bash
# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
ssh root@ä½ çš„æœåŠ¡å™¨IP 'cd /opt/nofx && docker compose logs'

# é‡æ–°æž„å»ºé•œåƒ
ssh root@ä½ çš„æœåŠ¡å™¨IP 'cd /opt/nofx && docker compose build --no-cache && docker compose up -d'
```

### é—®é¢˜4ï¼šé…ç½®æ–‡ä»¶é”™è¯¯

```bash
# éªŒè¯JSONæ ¼å¼
cat config.json | python -m json.tool

# æˆ–ä½¿ç”¨jqå·¥å…·
cat config.json | jq .
```

## ðŸ’¡ è¿›é˜¶é…ç½®

### ä¿®æ”¹ç«¯å£

ç¼–è¾‘é¡¹ç›®æ ¹ç›®å½•çš„ `.env` æ–‡ä»¶ï¼ˆå¦‚ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰ï¼š

```bash
# .env
NOFX_BACKEND_PORT=8080    # åŽç«¯ç«¯å£
NOFX_FRONTEND_PORT=3000   # å‰ç«¯ç«¯å£
NOFX_TIMEZONE=Asia/Shanghai  # æ—¶åŒº
```

### é…ç½®HTTPSï¼ˆä½¿ç”¨Let's Encryptï¼‰

```bash
# 1. å®‰è£…certbot
ssh root@ä½ çš„æœåŠ¡å™¨IP
apt-get update
apt-get install certbot nginx

# 2. èŽ·å–SSLè¯ä¹¦
certbot certonly --standalone -d ä½ çš„åŸŸå.com

# 3. é…ç½®Nginxåå‘ä»£ç†ï¼ˆå‚è€ƒREMOTE_DEPLOY.mdï¼‰
```

## ðŸ” å®‰å…¨å»ºè®®

### 1. æ›´æ”¹é»˜è®¤SSHç«¯å£

```bash
# ç¼–è¾‘SSHé…ç½®
sudo nano /etc/ssh/sshd_config
# ä¿®æ”¹ Port 22 ä¸ºå…¶ä»–ç«¯å£ï¼Œå¦‚ Port 2222

# é‡å¯SSHæœåŠ¡
sudo systemctl restart sshd

# ä¹‹åŽä½¿ç”¨æ–°ç«¯å£è¿žæŽ¥
ssh -p 2222 root@ä½ çš„æœåŠ¡å™¨IP
```

### 2. ç¦ç”¨å¯†ç ç™»å½•ï¼ˆä»…å…è®¸å¯†é’¥ï¼‰

```bash
# ç¼–è¾‘SSHé…ç½®
sudo nano /etc/ssh/sshd_config

# è®¾ç½®ä»¥ä¸‹é€‰é¡¹ï¼š
# PasswordAuthentication no
# PubkeyAuthentication yes

# é‡å¯SSHæœåŠ¡
sudo systemctl restart sshd
```

### 3. å®‰è£…fail2bané˜²æ­¢æš´åŠ›ç ´è§£

```bash
sudo apt-get install fail2ban
sudo systemctl enable fail2ban
sudo systemctl start fail2ban
```

### 4. å®šæœŸå¤‡ä»½

```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬
ssh root@ä½ çš„æœåŠ¡å™¨IP
cat > /opt/backup-nofx.sh << 'EOF'
#!/bin/bash
BACKUP_DIR="/backup/nofx"
DATE=$(date +%Y%m%d_%H%M%S)
mkdir -p $BACKUP_DIR
cd /opt/nofx
tar -czf $BACKUP_DIR/nofx-backup-$DATE.tar.gz config.json decision_logs/
# ä¿ç•™æœ€è¿‘7å¤©çš„å¤‡ä»½
find $BACKUP_DIR -name "nofx-backup-*.tar.gz" -mtime +7 -delete
EOF

chmod +x /opt/backup-nofx.sh

# æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å¤©å‡Œæ™¨2ç‚¹å¤‡ä»½ï¼‰
crontab -e
# æ·»åŠ ä¸€è¡Œï¼š0 2 * * * /opt/backup-nofx.sh
```

## ðŸ“ž èŽ·å–å¸®åŠ©

å¦‚æžœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹[å®Œæ•´éƒ¨ç½²æ–‡æ¡£](REMOTE_DEPLOY.md)
2. æŸ¥çœ‹[Dockeréƒ¨ç½²æ–‡æ¡£](DOCKER_DEPLOY.md)
3. æäº¤[GitHub Issue](https://github.com/mumugogoing/nofx/issues)
4. åŠ å…¥[Telegramç¤¾åŒº](https://t.me/nofx_dev_community)

## âœ… éƒ¨ç½²æˆåŠŸæ£€æŸ¥æ¸…å•

å®Œæˆä»¥ä¸‹æ£€æŸ¥ï¼Œç¡®ä¿éƒ¨ç½²æˆåŠŸï¼š

- [ ] SSHå¯†é’¥è®¤è¯é…ç½®æˆåŠŸ
- [ ] config.jsoné…ç½®å®Œæˆå¹¶åŒ…å«æ­£ç¡®çš„APIå¯†é’¥
- [ ] éƒ¨ç½²è„šæœ¬è¿è¡Œæ— é”™è¯¯
- [ ] èƒ½å¤Ÿè®¿é—® http://æœåŠ¡å™¨IP:3000 æŸ¥çœ‹Webç•Œé¢
- [ ] èƒ½å¤Ÿè®¿é—® http://æœåŠ¡å™¨IP:8080/health æŸ¥çœ‹APIçŠ¶æ€
- [ ] é˜²ç«å¢™/å®‰å…¨ç»„è§„åˆ™å·²é…ç½®
- [ ] èƒ½å¤ŸæŸ¥çœ‹å®žæ—¶æ—¥å¿—
- [ ] æœåŠ¡èƒ½å¤Ÿæ­£å¸¸é‡å¯

---

ðŸŽ‰ **æ­å–œï¼ä½ å·²ç»æˆåŠŸå°†NOFXéƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼**

å¼€å§‹ä½ çš„AIäº¤æ˜“ä¹‹æ—…å§ï¼è®°å¾—å…ˆç”¨å°é¢èµ„é‡‘æµ‹è¯•ã€‚
